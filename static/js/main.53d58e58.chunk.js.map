{"version":3,"sources":["components/Canvas/getSize.js","components/Canvas/Canvas.jsx","components/Spectrogram/element.jsx","components/FileUploader/Uploader.jsx","components/FileDownloader/Downloader.jsx","components/PlaybackCtrl/PlaybackCtrl.jsx","components/FileList/FileList.jsx","components/GridSystem/index.js","components/GridSystem/Grid.jsx","components/GridSystem/GridItem.jsx","components/Recorder/Recorder.jsx","AudioStream/index.js","App.js","index.js"],"names":["parseNumber","prop","parseFloat","getSize","el","window","document","body","innerWidth","innerHeight","temporary","parentNode","appendChild","rect","getBoundingClientRect","styles","getComputedStyle","height","getPropertyValue","width","removeChild","ResponsiveCanvas","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleResize","_assertThisInitialize","assertThisInitialized","_this$state","ctx","canvas","state","setState","objectSpread","setSize","props","canvasApp","parent","parentElement","_getSize","_getSize2","slicedToArray","setRef","createRef","canvasRef","_this2","addEventListener","getContext","_this2$state","init","removeEventListener","scale","devicePixelRatio","_this$state2","react_default","a","createElement","ref","style","Component","Canvas","Canvas_ResponsiveCanvas","Canvas_this3","isPlaying","Spectrogram","hiddenCanvas","hiddenContext","fillStyle","fillRect","slice","getImageData","translate","rotate","Math","PI","draw","console","log","cancelAnimationFrame","animationLoop","x","arguments","length","undefined","y","_this$canvas","_this$props","streamData","mic","requestAnimationFrame","sliceData","data","i","putImageData","drawImage","imageData","scaled","createImageData","row","col","sourcePixel","destRow","destCol","_this3","Canvas_Canvas","Uploader","handleUpload","reader","loading","Audio","file","files","readAsDataURL","src","onloadend","result","onUploadSuccess","name","FileReader","Fragment","tooltip","title","es_button","size","shape","icon","onClick","click","accept","type","display","onChange","Downloader","assign","handleDownload","PlaybackCtrl","handlePlayback","FileList","handleSelect","handleCapture","selectedFile","dataSource","list","header","justifyContent","Uploader_Uploader","Downloader_Downloader","PlaybackCtrl_PlaybackCtrl","disabled","Recorder_Recorder","textAlign","bordered","renderItem","Item","block","Meta","avatar","source","href","target","author","GridSystem","GridStyles","gridTemplateColumns","concat","cols","gridTemplateRows","rows","gridRowGap","gridColumnGap","className","React","Children","map","children","id","cloneElement","GridItemStyles","rowStart","gridRowStart","rowEnd","gridRowEnd","colStart","gridColumnStart","colEnd","gridColumnEnd","Recorder","index_esm","AudioStream","microphone","play","bind","getStreamData","actx","audioWorklet","addModule","process","bypassNode","AudioWorkletNode","AudioContext","webkitAudioContext","loadModule","_context2","t0","checkContext","analyser","createAnalyser","dataArray","Uint8Array","frequencyBinCount","createMediaElementSource","fftSize","minDecibels","maxDecibels","connect","destination","push","e","navigator","getUserMedia","audio","stream","createMediaStreamSource","recorder","MediaRecorder","getAudioTracks","forEach","track","index","resume","pause","currentTime","getByteFrequencyData","Grid","GridItem","social","path","App","stop","handleStreamData","loadSamples","getElementsByTagName","link","download","Date","now","toDataURL","fromFile","incoming","_this4","fromMic","analyserLoop","stopMic","App_Grid","App_GridItem","margin","marginTop","padding","backgroundColor","position","element_Spectrogram","bottom","FileList_FileList","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.53d58e58.chunk.js","sourcesContent":["const parseNumber = prop => parseFloat(prop) || 0;\n\nconst getSize = (el) => {\n  if (el === window || el === document.body) {\n    return [window.innerWidth, window.innerHeight];\n  }\n\n  let temporary = false;\n\n  if (!el.parentNode && document.body) {\n    temporary = true;\n    document.body.appendChild(el);\n  }\n\n  const rect = el.getBoundingClientRect();\n  const styles = getComputedStyle(el);\n  const height =\n    (rect.height | 0) +\n    parseNumber(styles.getPropertyValue('margin-top')) +\n    parseNumber(styles.getPropertyValue('margin-bottom'));\n  const width =\n    (rect.width | 0) +\n    parseNumber(styles.getPropertyValue('margin-left')) +\n    parseNumber(styles.getPropertyValue('margin-right'));\n\n  if (temporary && document.body) {\n    document.body.removeChild(el);\n  }\n\n  return [width, height];\n};\n\nexport default getSize;","import React, { Component } from 'react';\nimport getSize from './getSize';\n\nclass ResponsiveCanvas extends Component {\n    constructor() {\n        super();\n        this.state = {\n            width: 0,\n            height: 0\n        };\n    }\n    componentDidMount() {\n        this.setState({ ...this.setSize() }, () => {\n            window.addEventListener('resize', this.handleResize, false);\n            this.ctx = this.canvas.getContext('2d');\n            const { ctx, canvas } = this;\n            const { width, height } = this.state;\n            this.props.canvasApp.init(ctx, canvas, width, height);\n        });\n    }\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.handleResize, false);\n    }\n    handleResize = () => {\n        const { ctx, canvas } = this;\n        const { width, height } = this.state;\n        this.setState({ ...this.setSize() }, () => {\n            this.props.canvasApp.setSize(width, height)\n            // Add custom events with this.props.onResize();\n        });\n    }\n    setSize = () => {\n        const parent = this.canvas.parentElement;\n        if (!parent) return;\n        const [width, height] = getSize(parent);\n        return { width, height };\n    }\n    setRef = (el) => {\n        if (!el) return\n        const { createRef } = this.props;\n        this.canvas = el;\n        if (typeof canvasRef === 'function') {\n            createRef(el);\n        }\n    };\n    render() {\n        const scale = window.devicePixelRatio || 1;\n        const { width, height } = this.state;\n        return (\n            <canvas\n                ref={this.setRef}\n                width={width * scale}\n                height={height * scale}\n                style={{ width, height, ...this.props.style,  }}\n            />\n        )\n    }\n}\n\nconst Canvas = (props) => {\n    return (\n        <ResponsiveCanvas\n            style={{ ...props.style, }}\n            canvasRef={el => { this.canvas = el }}\n            canvasApp={props.canvasApp}\n            isPlaying={props.isPlaying}\n        />\n    )\n}\n\n\nexport { Canvas };","import React, { Component } from 'react';\nimport { Canvas } from '../Canvas';\nclass Spectrogram extends Component {\n    constructor() {\n        super();\n        this.hiddenCanvas = document.createElement('canvas');\n        this.hiddenContext = this.hiddenCanvas.getContext('2d');\n    }\n    init(ctx, canvas, width, height) {\n        this.ctx = ctx;\n        this.canvas = canvas;\n        this.canvas.width = width;\n        this.canvas.height = height;\n        this.hiddenCanvas.width = width;\n        this.hiddenCanvas.height = height;\n        this.ctx.fillStyle = 'black';\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        this.slice = this.ctx.getImageData(0, 0, 1, this.canvas.height);\n        this.ctx.translate(0, height)\n        this.ctx.rotate(180 * (Math.PI / 180));\n        this.ctx.scale(-1, 1);\n        this.draw()\n    }\n    setSize(width, height) {\n        console.log('resizing', width, height)\n        this.canvas.width = width;\n        this.canvas.height = height;\n        cancelAnimationFrame(this.animationLoop);\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        this.ctx.translate(0, height)\n        this.ctx.rotate(180 * (Math.PI / 180));\n        this.ctx.scale(-1, 1);\n        this.slice = this.ctx.getImageData(0, 0, 1, this.canvas.height);\n        this.draw();\n    }\n    draw(x = 0, y = 0) {\n        const {\n            slice,\n            ctx,\n            hiddenContext,\n            canvas: { width, height },\n            hiddenCanvas,\n            props: { streamData, isPlaying, mic } } = this;\n        this.animationLoop = requestAnimationFrame(() => {\n            if (x > width) x = 0;\n            this.draw(x, y);\n        });\n        let sliceData = slice.data;\n        for (let i = 0; i < sliceData.length; i += 4) {\n            if (streamData) {\n                // Main\n                sliceData[i] = streamData[i]\n                sliceData[i + 1] = streamData[i + 1]\n                sliceData[i + 2] = streamData[i + 2]\n\n            } else {\n                // Standby\n                sliceData[i] = 0;\n                sliceData[i + 1] = 0;\n                sliceData[i + 2] = 0;\n            }\n        }\n        isPlaying || mic ? x++ : x = 0;\n\n        hiddenContext.putImageData(slice, x, y);\n        ctx.drawImage(hiddenCanvas, 0, 0)\n    }\n    scaleImageData(imageData, scale) {\n        let scaled = this.ctx.createImageData(imageData.width * scale, imageData.height * scale);\n        for (let row = 0; row < imageData.height; row++) {\n            for (let col = 0; col < imageData.width; col++) {\n                let sourcePixel = [\n                    imageData.data[(row * imageData.width + col) * 4 + 0],\n                    imageData.data[(row * imageData.width + col) * 4 + 1],\n                    imageData.data[(row * imageData.width + col) * 4 + 2],\n                    imageData.data[(row * imageData.width + col) * 4 + 3]\n                ];\n                for (let y = 0; y < scale; y++) {\n                    let destRow = row * scale + y;\n                    for (let x = 0; x < scale; x++) {\n                        let destCol = col * scale + x;\n                        for (let i = 0; i < 4; i++) {\n                            scaled.data[(destRow * scaled.width + destCol) * 4 + i] =\n                                sourcePixel[i];\n                        }\n                    }\n                }\n            }\n        }\n        return scaled;\n    }\n    render() {\n        return (\n            <Canvas style={{ ...this.props.style }} canvasRef={el => { this.canvas = el }} canvasApp={this} isPlaying={this.props.isPlaying} />\n        )\n    }\n}\n\n\n\n\nexport { Spectrogram };","\nimport React, { Component } from 'react';\nimport { Button, Tooltip } from 'antd';\n\nclass Uploader extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false\n    }\n    this.reader = new FileReader();\n  }\n  handleUpload = () => {\n    const { props, reader } = this;\n    this.setState({ loading: true });\n    const el = new Audio();\n    const file = this.el.files[0];\n    if (file) {\n      reader.readAsDataURL(file);\n    } else {\n      el.src = \"\";\n    }\n    reader.onloadend = () => {\n      el.src = reader.result;\n      props.onUploadSuccess({ name: file.name, el });\n      this.setState({ loading: false });\n    }\n  }\n  render() {\n    const { state } = this;\n    return (\n      <React.Fragment>\n        <Tooltip title='upload audio'>\n          <Button\n            size='small'\n            shape='circle'\n            icon='upload'\n            loading={state.loading}\n            onClick={() => this.el.click()}\n          />\n        </Tooltip>\n        <input\n          accept='audio/*'\n          ref={el => this.el = el} type=\"file\" style={{ display: 'none' }}\n          onChange={() => this.handleUpload()}\n        />\n      </React.Fragment>\n    )\n  }\n}\n\nexport { Uploader }","import React from 'react';\nimport { Button, Tooltip } from 'antd';\n\nexport const Downloader = (props) => {\n    return (\n        <Tooltip title='download image'>\n            <Button\n                {...props}\n                onClick={props.handleDownload}\n                size='small'\n                shape='circle'\n                icon='download'\n            />\n        </Tooltip>\n    )\n}","import React from 'react';\nimport { Button, Tooltip } from 'antd';\n\nexport const PlaybackCtrl = (props) => {\n    return (\n        <Tooltip title={props.isPlaying ? 'pause' : 'play'}>\n            <Button\n                {...props}\n                size='small'\n                shape='circle'\n                icon={props.isPlaying ? 'pause-circle' : 'play-circle'}\n                onClick={props.handlePlayback}\n            />\n        </Tooltip>\n    )\n}","import React from 'react';\nimport { Uploader, Downloader, PlaybackCtrl, Recorder } from '../';\nimport { List, Button, Icon } from 'antd';\nexport const FileList = (props) => {\n    const {\n        onUploadSuccess,\n        handleSelect,\n        handlePlayback,\n        handleCapture,\n        isPlaying,\n        selectedFile,\n        dataSource,\n        mic,\n        handleDownload\n    } = props;\n    return (\n        <List\n            style={props.style}\n            header={\n                <div>\n                    <div style={{ display: 'flex', justifyContent: 'space-evenly', }}>\n                        <Uploader onUploadSuccess={onUploadSuccess} />\n                        <Downloader handleDownload={handleDownload} />\n                        <PlaybackCtrl\n                            disabled={!selectedFile || mic}\n                            handlePlayback={handlePlayback}\n                            isPlaying={isPlaying}\n                        />\n                        <Recorder mic={mic} isPlaying={isPlaying} handleCapture={handleCapture} />\n                        {selectedFile ? <span style={{ textAlign: 'center' }}><Icon type='sound' /> {mic ? 'Microphone' : selectedFile.name}</span> : null}\n                    </div>\n                </div>\n            }\n            bordered\n            dataSource={dataSource}\n            renderItem={file => (\n                <List.Item>\n                    <Button\n                        disabled={mic}\n                        block\n                        // style={{ margin: '0 auto' }}\n                        onClick={() => handleSelect(file)}>\n                        <List.Item.Meta\n                            avatar={<img width={25} height={25} src=\"https://www.svgrepo.com/show/8210/musical-notes.svg\" />}\n                            title={\n                                <span>\n                                    {\n                                        file.source ?\n                                            <span>\n                                                <a href={file.source} target='_blank'>{file.name}</a> by {file.author.name}\n                                            </span>\n                                            : file.name\n                                    }\n                                </span>\n                            }\n                        />\n                    </Button>\n                </List.Item>\n            )}\n        />\n    )\n}","import { Grid } from './Grid';\nimport { GridItem } from './GridItem';\nexport const GridSystem = { Grid, GridItem };","import React from 'react';\n\nexport const Grid = (props) => {\n    const GridStyles = {\n        display: 'grid',\n        gridTemplateColumns: `repeat(${props.cols}, 1fr)`,\n        gridTemplateRows: `repeat(${props.rows}, 1fr)`,\n        ...props.style,\n        gridRowGap: 0,\n        gridColumnGap: 0,\n    }\n    const { rows, cols } = props;\n    return (\n        <div className='grid' style={GridStyles}>\n            {\n                React.Children.map(props.children, (row, id) => React.cloneElement(row, { id: id + 1, rows: rows + 1, cols: cols + 1 }))\n            }\n        </div>\n    );\n}","import React from 'react';\n\nexport const GridItem = (props) => {\n    const GridItemStyles = {\n        ...props.rowStart ? { gridRowStart: props.rowStart } : { gridRowStart: props.id },\n        ...props.rowEnd ? { gridRowEnd: props.rowEnd + 1 } : null,\n        ...props.colStart ? { gridColumnStart: props.colStart } : { gridColumnStart: 1 },\n        ...props.colEnd ? { gridColumnEnd: props.colEnd + 1 } : { gridColumnEnd: props.cols },\n        ...props.style\n    }\n    return (\n        <div style={GridItemStyles}>\n            {props.children}\n        </div>\n    );\n}","\nimport React, { Component } from 'react';\nimport { Button, Tooltip } from 'antd';\nimport { MdMicOff } from \"react-icons/md\";\n\nclass Recorder extends Component {\n    constructor() {\n        super();\n    }\n    render() {\n        const { props } = this;\n        return (\n            <React.Fragment>\n                <Tooltip title={props.mic ? 'mute mic' : 'connect mic'}>\n                    <Button\n                        disabled={props.isPlaying}\n                        style={{ display: 'flex', justifyContent: 'space-evenly', }}\n                        onClick={props.handleCapture}\n                        size='small'\n                        shape='circle'\n                        icon={!props.mic ? 'audio' : null}\n                    >{props.mic ? <MdMicOff /> : null}</Button>\n                </Tooltip>\n            </React.Fragment>\n        )\n    }\n}\n\nexport { Recorder }","/* AUDIOSTREAM\n*  API for audio playback and analysis.\n*/\n\nclass AudioStream {\n    constructor() {\n        this.microphone = {};\n        this.files = [];\n        this.play = this.play.bind(this);\n        this.getStreamData = this.getStreamData.bind(this)\n    }\n    async loadModule() {\n        const { actx } = this;\n        try {\n            await actx.audioWorklet.addModule(`${process.env.PUBLIC_URL}/worklet/bypass-processor.js`);\n            this.bypassNode = new AudioWorkletNode(actx, 'bypass-processor');\n            console.log(`loaded module `);\n            return true;\n        } catch (e) {\n            console.log(`Failed to load module`);\n            return false;\n        }\n    }\n    async checkContext() {\n        if (!this.actx) {\n            try {\n                console.log('New context instantiated')\n                this.actx = new (window.AudioContext || window.webkitAudioContext)();\n                await this.loadModule();\n            } catch (e) {\n                console.log(`Sorry, but your browser doesn't support the Web Audio API!`, e);\n            }\n        }\n    }\n    fromFile(file) {\n        this.checkContext();\n        const { actx } = this;\n        try {\n            this.analyser = actx.createAnalyser();\n            this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n            this.source = actx.createMediaElementSource(file.el);\n            const { analyser, source, dataArray } = this;\n            analyser.fftSize = 2048;\n            analyser.minDecibels = -100;\n            analyser.maxDecibels = -15;\n            analyser.connect(actx.destination);\n            source.connect(this.analyser);\n            this.files.push({ file, analyser, source, dataArray })\n        } catch (e) {\n            console.log('Failed to make stream: ', e);\n        }\n    }\n    fromMic() {\n        this.checkContext();\n        const { actx, bypassNode } = this;\n        this.microphone.analyser = actx.createAnalyser();\n        const { analyser } = this.microphone;\n        analyser.fftSize = 4096;\n        analyser.minDecibels = -120;\n        analyser.maxDecibels = -15;\n        this.microphone.dataArray = new Uint8Array(analyser.frequencyBinCount);\n        navigator.getUserMedia({ audio: true }, (stream) => {\n            this.microphone.source = actx.createMediaStreamSource(stream);\n            this.microphone.recorder = new MediaRecorder(stream);\n            this.microphone.source.connect(analyser)\n                .connect(bypassNode)\n                .connect(actx.destination);\n        }, (e) => console.log(e));\n    }\n    stopMic() {\n        this.microphone\n            .recorder\n            .stream\n            .getAudioTracks().forEach((track) => console.log(track));\n    }\n    play(index) {\n        this.actx.resume();\n        this.files[index].file.el.play();\n        this.getStreamData(index);\n    }\n    stop(index) {\n        this.files[index].file.el.pause();\n        this.files[index].file.el.currentTime = 0;\n    }\n    getStreamData(index) {\n        if (index === 'mic') {\n            this.actx.resume();\n            this.microphone.analyser.getByteFrequencyData(this.microphone.dataArray)\n            return this.microphone.dataArray;\n        } else {\n            this.files[index].analyser.getByteFrequencyData(this.files[index].dataArray)\n            return this.files[index].dataArray;\n        }\n    }\n}\n\nexport { AudioStream }","/* APP\n*  The main page.\n*/\nimport React, { Component } from 'react';\nimport { Icon, Tooltip } from 'antd';\nimport { MdEmail } from 'react-icons/md'\nimport { Spectrogram, FileList, GridSystem } from './components';\nimport { AudioStream } from './AudioStream';\nconst { Grid, GridItem } = GridSystem;\nlet data = [\n  {\n    name: 'Animation study',\n    author: {\n      name: 'Orsolya Kaufmann',\n      social: ''\n    },\n    source: 'https://www.youtube.com/watch?v=Hxx6Gqf1Q4w&feature=youtu.be',\n    path: `${process.env.PUBLIC_URL}/data/animations.mp3`,\n  },\n  {\n    name: 'Alien transmission',\n    author: {\n      name: 'Spectral Transmissions',\n      social: ''\n    },\n    source: 'https://youtu.be/FnzIpAAzP3w',\n    path: `${process.env.PUBLIC_URL}/data/hidden_transmission.mp3`,\n  },\n  {\n    name: 'rhodes_motif.wav',\n    author: {\n      name: 'aphra',\n      social: ''\n    },\n    source: 'https://youtu.be/FnzIpAAzP3w',\n    path: `${process.env.PUBLIC_URL}/data/rhodes_motif.wav`,\n  },\n  {\n    name: 'rediscovery.wav',\n    author: {\n      name: 'aphra',\n      social: ''\n    },\n    source: 'https://youtu.be/FnzIpAAzP3w',\n    path: `${process.env.PUBLIC_URL}/data/rediscovery.wav`,\n  },\n\n];\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      mic: false,\n      files: [],\n      isPlaying: false,\n    }\n    this.AudioStream = new AudioStream();\n    this.play = this.play.bind(this);\n    this.stop = this.stop.bind(this);\n    this.onUploadSuccess = this.onUploadSuccess.bind(this);\n    this.handlePlayback = this.handlePlayback.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n    this.handleStreamData = this.handleStreamData.bind(this);\n    this.loadSamples = this.loadSamples.bind(this);\n    this.handleCapture = this.handleCapture.bind(this);\n    this.handleDownload = this.handleDownload.bind(this);\n  }\n  componentDidMount() {\n    this.loadSamples();\n  }\n  handleDownload() {\n    let canvas = document.getElementsByTagName('canvas')[0];\n    let link = document.createElement('a');\n    link.download = `spectrogram-${Date.now()}.png`;\n    link.href = canvas.toDataURL()\n    link.click();\n  }\n  loadSamples() {\n    let files = data.map((file, i) => {\n      let audio = new Audio();\n      audio.src = file.path;\n      file.el = audio;\n      file.index = i;\n      this.AudioStream.fromFile(file);\n      return file;\n    });\n    this.setState({ files, selectedFile: files[0] });\n  }\n  onUploadSuccess(file) {\n    let incoming = { ...file, index: this.state.files.length };\n    let files = this.state.files.concat({ ...incoming });\n    let selectedFile = this.state.selectedFile ? this.state.selectedFile : incoming;\n    this.setState({ files, selectedFile }, () => {\n      this.AudioStream.fromFile(file);\n      this.handleSelect(incoming);\n    });\n  }\n  handleSelect(file) {\n    if (this.state.isPlaying) this.stop();\n    this.setState({ selectedFile: file, isPlaying: false });\n  }\n  handlePlayback() {\n    const { play, stop, state: { isPlaying } } = this;\n    this.setState({ isPlaying: !isPlaying }, () => {\n      if (isPlaying) {\n        stop();\n      } else {\n        play();\n      }\n    });\n  }\n  handleCapture() {\n    this.setState({ mic: !this.state.mic }, () => {\n      if (!this.state.mic) {\n        cancelAnimationFrame(this.analyserLoop)\n        this.AudioStream.stopMic();\n      } else {\n        this.AudioStream.fromMic();\n        this.handleStreamData('mic');\n      }\n    });\n  }\n  play() {\n    const { AudioStream, handleStreamData, state: { selectedFile } } = this;\n    handleStreamData(selectedFile.index);\n    AudioStream.play(selectedFile.index)\n  }\n  stop() {\n    const { AudioStream, state: { selectedFile }, analyserLoop } = this;\n    cancelAnimationFrame(analyserLoop);\n    AudioStream.stop(selectedFile.index);\n    this.setState({ streamData: [] })\n  }\n  handleStreamData(index) {\n    const { AudioStream, handleStreamData } = this;\n    this.setState({ streamData: AudioStream.getStreamData(index) });\n    this.analyserLoop = requestAnimationFrame(() => handleStreamData(index));\n  }\n  render() {\n    return (\n      <Grid cols={8} rows={3}>\n        <GridItem style={{ width: '95vw', margin: '0 auto', marginTop: '6vh', padding: '1% 1%' }}>\n          <div style={{ textAlign: 'center', marginTop: '1%' }}>\n            <p> Hello, world! I'm Aphra, and this is a spectrogram. </p>\n            <p>You can observe spectral content from audio files or your microphone.</p>\n            <p>If you think its really pretty, you have the option to download the canvas. </p>\n            <p>Ready? Scroll down! (note: there is a gap in some of the audio files - give it a moment after pressing play)</p>\n          </div>\n        </GridItem>\n        <GridItem style={{ backgroundColor: 'black', position: 'relative' }}>\n          <Spectrogram style={{ position: 'absolute', bottom: 0 }} streamData={this.state.streamData} isPlaying={this.state.isPlaying} mic={this.state.mic} />\n        </GridItem>\n        <GridItem>\n          <FileList\n            handleDownload={this.handleDownload}\n            mic={this.state.mic}\n            selectedFile={this.state.selectedFile}\n            onUploadSuccess={this.onUploadSuccess}\n            handlePlayback={this.handlePlayback}\n            handleSelect={this.handleSelect}\n            handleCapture={this.handleCapture}\n            isPlaying={this.state.isPlaying}\n            dataSource={this.state.files}\n          />\n        </GridItem>\n\n      </Grid>\n    );\n  }\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'audioworklet-polyfill';\nimport 'antd/dist/antd.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}